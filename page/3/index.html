<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-前端/Vue/defineProperties" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/Vue/defineProperties/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:33.008Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="defineProperties"><a href="#defineProperties" class="headerlink" title="defineProperties"></a>defineProperties</h1><h1 id="数组监听"><a href="#数组监听" class="headerlink" title="数组监听"></a>数组监听</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/Vue/defineProperties/" data-id="ckm3ks24l0077nzx423hue8zw" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/TS/decorator" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/TS/decorator/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:32.713Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="装饰器-decorator"><a href="#装饰器-decorator" class="headerlink" title="装饰器(decorator)"></a>装饰器(decorator)</h1><p>装饰器是一种特殊的声明, 可以附加在类、方法、访问器、属性、参数声明上</p>
<p>装饰器使用<code>@expression</code>的形式,其中expression必须能够演算为运行时调用的函数,其中包含装饰声明信息.</p>
<p>装饰器类型及其执行顺序为</p>
<ol>
<li>类装饰器—优先级 4 (对象实例化, 静态)</li>
<li>方法装饰器—优先级 2 (对象实例化, 静态)</li>
<li>访问器或属性装饰器—优先级 3 (对象实例化, 静态)</li>
<li>参数装饰器—优先级1 (对象实例化, 静态)</li>
</ol>
<p>注意,如果装饰器应用与类构造函数的参数,那么不同的装饰器的优先级为:</p>
<ol>
<li>参数装饰器</li>
<li>方法装饰器</li>
<li>访问器或参数装饰器</li>
<li>构造器参数装饰器</li>
<li>类装饰器</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是一个装饰器工厂——有助于将用户参数传给装饰器声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;f(): evaluated&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, propertyKey: <span class="built_in">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;f(): called&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;g(): evaluated&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, propertyKey: <span class="built_in">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;g(): called&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  <span class="meta">@f</span>()</span><br><span class="line">  <span class="meta">@g</span>()</span><br><span class="line">  <span class="function"><span class="title">method</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// f(): evaluated</span></span><br><span class="line"><span class="comment">// g(): evaluated</span></span><br><span class="line"><span class="comment">// g(): called</span></span><br><span class="line"><span class="comment">// f(): called</span></span><br></pre></td></tr></table></figure>

<p><code>f</code>和<code>g</code>返回了另一个函数(装饰器函数). <code>f</code>和<code>g</code>称为装饰器工厂</p>
<blockquote>
<p><code>装饰器工厂</code>帮助用户传递可供装饰器利用的参数</p>
</blockquote>
<p>我们可以看到装饰器的,<code>演算规则</code>为<strong>由顶向上</strong>,执行顺序<strong>由底向上</strong></p>
<h2 id="装饰器的签名"><a href="#装饰器的签名" class="headerlink" title="装饰器的签名"></a>装饰器的签名</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TypedPropertyDescriptor&lt;T&gt; &#123;</span><br><span class="line">    enumerable?: <span class="built_in">boolean</span>;</span><br><span class="line">    configurable?: <span class="built_in">boolean</span>;</span><br><span class="line">    writable?: <span class="built_in">boolean</span>;</span><br><span class="line">    value?: T;</span><br><span class="line">    get?: <span class="function">() =&gt;</span> T;</span><br><span class="line">    set?: <span class="function">(<span class="params">value: T</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> ClassDecorator = <span class="xml"><span class="tag">&lt;<span class="name">TFunction</span> <span class="attr">extends</span> <span class="attr">Function</span>&gt;</span>(target: TFunction) =&gt; TFunction | void;</span></span><br><span class="line"><span class="xml">declare type PropertyDecorator = (target: Object, propertyKey: string | symbol) =&gt; void;</span></span><br><span class="line">declare type MethodDecorator = &lt;T&gt;(target: Object, propertyKey: string | symbol, descriptor: TypedPropertyDescriptor&lt;T&gt;) =&gt; TypedPropertyDescriptor&lt;T&gt; | void;</span><br><span class="line">declare type ParameterDecorator = (target: Object, propertyKey: string | symbol, parameterIndex: number) =&gt; void;</span><br></pre></td></tr></table></figure>

<h2 id="方法装饰器"><a href="#方法装饰器" class="headerlink" title="方法装饰器"></a>方法装饰器</h2><p>可以从上面的签名中,看到它有三个参数</p>
<ol>
<li>target: 当前对象的原型,也就是说,假设Employee是对象,那么target就是Employee.prototype</li>
<li>propertyKey: 方法的名称</li>
<li>descriptor: 方法的属性描述符,即Object.getOwnPropertyDescriptor(Employ.prototype, propertyKey)</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logMethod</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  target: <span class="built_in">Object</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  propertyName: <span class="built_in">string</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  propertyDescriptor: PropertyDescriptor</span>): <span class="title">PropertyDescriptor</span> </span>&#123;</span><br><span class="line">  <span class="comment">// target === Employee.prototype</span></span><br><span class="line">  <span class="comment">// propertyName === &quot;greet&quot;</span></span><br><span class="line">  <span class="comment">// propertyDesciptor === Object.getOwnPropertyDescriptor(Employee.prototype, &quot;greet&quot;)</span></span><br><span class="line">  <span class="keyword">const</span> method = propertyDesciptor.value;</span><br><span class="line"></span><br><span class="line">  propertyDesciptor.value = <span class="function"><span class="keyword">function</span> (<span class="params">...args: <span class="built_in">any</span>[]</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 将 greet 的参数列表转换为字符串</span></span><br><span class="line">    <span class="keyword">const</span> params = args.map(<span class="function"><span class="params">a</span> =&gt;</span> <span class="built_in">JSON</span>.stringify(a)).join();</span><br><span class="line">    <span class="comment">// 调用 greet() 并获取其返回值</span></span><br><span class="line">    <span class="keyword">const</span> result = method.apply(<span class="built_in">this</span>, args);</span><br><span class="line">    <span class="comment">// 转换结尾为字符串</span></span><br><span class="line">    <span class="keyword">const</span> r = <span class="built_in">JSON</span>.stringify(result);</span><br><span class="line">    <span class="comment">// 在终端显示函数调用细节</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Call: <span class="subst">$&#123;propertyName&#125;</span>(<span class="subst">$&#123;params&#125;</span>) =&gt; <span class="subst">$&#123;r&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">// 返回调用函数的结果</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> propertyDesciptor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="title">constructor</span>(<span class="params"><span class="keyword">private</span> firstName: <span class="built_in">string</span>, <span class="keyword">private</span> lastName: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@logMethod</span></span><br><span class="line">    greet(message: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="built_in">this</span>.lastName&#125;</span> says: <span class="subst">$&#123;message&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emp = <span class="keyword">new</span> Employee(<span class="string">&#x27;Mohan Ram&#x27;</span>, <span class="string">&#x27;Ratnakumar&#x27;</span>);</span><br><span class="line">emp.greet(<span class="string">&#x27;hello&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>javascript 编译后是什么样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> __decorate =</span><br><span class="line">    (<span class="built_in">this</span> &amp;&amp; <span class="built_in">this</span>.__decorate) ||</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">decorators, target, key, desc</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 函数参数长度</span></span><br><span class="line">        <span class="keyword">var</span> c = <span class="built_in">arguments</span>.length;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 处理结果</span></span><br><span class="line"><span class="comment">         * 如果仅仅传入了装饰器数组和目标，那么应该是个类装饰器。</span></span><br><span class="line"><span class="comment">         * 否则，如果描述符（第 4 个参数）为 null，就根据已知值准备属性描述符，</span></span><br><span class="line"><span class="comment">         * 反之则使用同一描述符。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> r =</span><br><span class="line">            c &lt; <span class="number">3</span></span><br><span class="line">                ? target</span><br><span class="line">                : desc === <span class="literal">null</span></span><br><span class="line">                ? (desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(target, key))</span><br><span class="line">                : desc;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明存储装饰器的变量</span></span><br><span class="line">        <span class="keyword">var</span> d;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果原生反射可用，使用原生反射触发装饰器</span></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            <span class="keyword">typeof</span> <span class="built_in">Reflect</span> === <span class="string">&quot;object&quot;</span> &amp;&amp;</span><br><span class="line">            <span class="keyword">typeof</span> <span class="built_in">Reflect</span>.decorate === <span class="string">&quot;function&quot;</span></span><br><span class="line">        ) &#123;</span><br><span class="line">            r = <span class="built_in">Reflect</span>.decorate(decorators, target, key, desc);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 自右向左迭代装饰器</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = decorators.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="comment">// 如果装饰器合法，将其赋值给 d</span></span><br><span class="line">                <span class="keyword">if</span> ((d = decorators[i])) &#123;</span><br><span class="line">                    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * 如果仅仅传入了装饰器数组和目标，那么应该是类装饰器，</span></span><br><span class="line"><span class="comment">                     * 传入目标调用装饰器。</span></span><br><span class="line"><span class="comment">                     * 否则，如果 4 个参数俱全，那么应该是方法装饰器，</span></span><br><span class="line"><span class="comment">                     * 据此进行调用。</span></span><br><span class="line"><span class="comment">                     * 反之则使用同一描述符。</span></span><br><span class="line"><span class="comment">                     * 如果传入了 3 个参数，那么应该是属性装饰器，可进行相应的调用。</span></span><br><span class="line"><span class="comment">                     * 如果以上条件皆不满足，返回处理的结果。</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    r =</span><br><span class="line">                        (c &lt; <span class="number">3</span></span><br><span class="line">                            ? d(r)</span><br><span class="line">                            : c &gt; <span class="number">3</span></span><br><span class="line">                            ? d(target, key, r)</span><br><span class="line">                            : d(target, key)) || r;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 由于只有方法装饰器需要根据应用装饰器的结果修正其属性，</span></span><br><span class="line"><span class="comment">         * 所以最后返回处理好的 r</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> c &gt; <span class="number">3</span> &amp;&amp; r &amp;&amp; <span class="built_in">Object</span>.defineProperty(target, key, r), r;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Employee = <span class="comment">/** <span class="doctag">@class </span>*/</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params">firstName, lastName</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">        <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line">    Employee.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot; &quot;</span> + <span class="built_in">this</span>.lastName + <span class="string">&quot; says: &quot;</span> + message;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// typescript 调用 `__decorate` 辅助函数，</span></span><br><span class="line">    <span class="comment">// 以便在对象原型上应用装饰器</span></span><br><span class="line">    __decorate([logMethod], Employee.prototype, <span class="string">&quot;greet&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> Employee;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> Employee(<span class="string">&quot;Mohan Ram&quot;</span>, <span class="string">&quot;Ratnakumar&quot;</span>);</span><br><span class="line">emp.greet(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>让我们开始分析<code>Employee</code>函数—构造器初始化<code>name</code>和<code>greet</code>方法,将其传入原型.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__decorate([logMethod], Employee.prototype, <span class="string">&quot;greet&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这是 TypeScript 自动生成的通用方法，它根据装饰器类型和相应参数处理装饰器函数调用。</p>
<p>该函数有助于内省方法调用，并为开发者铺平了处理类似<code>日志</code>、<code>记忆化</code>、<code>应用配置</code>等横切关注点的道路。</p>
<p>在这个例子中，我们仅仅打印了函数调用及其参数、响应。</p>
<p>注意，阅读 <code>__decorate</code> 方法中的详细注释可以理解其内部机制。</p>
<h2 id="属性装饰器"><a href="#属性装饰器" class="headerlink" title="属性装饰器"></a>属性装饰器</h2><p>属性装饰器有两个参数</p>
<ol>
<li>target: 当前对象原型, 也就说,假设Employee是对象,那么target就是Employee.prototype</li>
<li>propertyKey: 属性名称</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logParameter</span>(<span class="params">target: <span class="built_in">Object</span>, propertyName: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 属性值</span></span><br><span class="line">    <span class="keyword">let</span> _val = <span class="built_in">this</span>[propertyName];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 属性读取访问器</span></span><br><span class="line">    <span class="keyword">const</span> getter = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Get: <span class="subst">$&#123;propertyName&#125;</span> =&gt; <span class="subst">$&#123;_val&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span> _val;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 属性写入访问器</span></span><br><span class="line">    <span class="keyword">const</span> setter = <span class="function"><span class="params">newVal</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Set: <span class="subst">$&#123;propertyName&#125;</span> =&gt; <span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">        _val = newVal;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除属性</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">delete</span> <span class="built_in">this</span>[propertyName]) &#123;</span><br><span class="line">        <span class="comment">// 创建新属性及其读取访问器、写入访问器</span></span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(target, propertyName, &#123;</span><br><span class="line">            get: getter,</span><br><span class="line">            set: setter,</span><br><span class="line">            enumerable: <span class="literal">true</span>,</span><br><span class="line">            configurable: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="meta">@logParameter</span></span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.name = <span class="string">&#x27;Mohan Ram&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(emp.name);</span><br><span class="line"><span class="comment">// Set: name =&gt; Mohan Ram</span></span><br><span class="line"><span class="comment">// Get: name =&gt; Mohan Ram</span></span><br><span class="line"><span class="comment">// Mohan Ram</span></span><br></pre></td></tr></table></figure>
<p>上面的代码中, 我们在装饰器中内省属性的可访问性, 下面是编译后的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Employee = <span class="comment">/** <span class="doctag">@class </span>*/</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    __decorate([</span><br><span class="line">        logParameter</span><br><span class="line">    ], Employee.prototype, <span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> Employee;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.name = <span class="string">&#x27;Mohan Ram&#x27;</span>; <span class="comment">// Set: name =&gt; Mohan Ram</span></span><br><span class="line"><span class="built_in">console</span>.log(emp.name); <span class="comment">// Get: name =&gt; Mohan Ram</span></span><br></pre></td></tr></table></figure>

<h2 id="参数装饰器"><a href="#参数装饰器" class="headerlink" title="参数装饰器"></a>参数装饰器</h2><p>参数装饰器函数有三个参数: </p>
<ol>
<li>target: 当前对象的原型,也就是说,假设Employee是对象, 那么 target就是Employee.prototype</li>
<li>propertyKey: 参数名称</li>
<li>index: 参数数组中的位置</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logParameter</span>(<span class="params">target: <span class="built_in">Object</span>, propertyName: <span class="built_in">string</span>, index: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 为相应方法生成元数据键，以储存被装饰的参数的位置</span></span><br><span class="line">    <span class="keyword">const</span> metadataKey = <span class="string">`log_<span class="subst">$&#123;propertyName&#125;</span>_parameters`</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(target[metadataKey])) &#123;</span><br><span class="line">        target[metadataKey].push(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        target[metadataKey] = [index];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    greet(<span class="meta">@logParameter</span> message: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`hello <span class="subst">$&#123;message&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.greet(<span class="string">&#x27;hello&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>上面的代码中,我们收集了所有被装饰的方法的索引或位置, 作为元数据加入对象的原型.后面是编译后的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回接受参数索引和装饰器的函数</span></span><br><span class="line"><span class="keyword">var</span> __param = (<span class="built_in">this</span> &amp;&amp; <span class="built_in">this</span>.__param) || <span class="function"><span class="keyword">function</span> (<span class="params">paramIndex, decorator</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 该函数返回装饰器</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, key</span>) </span>&#123; decorator(target, key, paramIndex); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Employee = <span class="comment">/** <span class="doctag">@class </span>*/</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    Employee.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello &quot;</span> + message;</span><br><span class="line">    &#125;;</span><br><span class="line">    __decorate([</span><br><span class="line">        __param(<span class="number">0</span>, logParameter)</span><br><span class="line">    ], Employee.prototype, <span class="string">&quot;greet&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> Employee;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.greet(<span class="string">&#x27;hello&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>类似之前见过的__decorate函数,__param 函数返回一个封装参数装饰器的装饰器</p>
<p>如我们所见,调用参数装饰器时, 会忽略其返回值.这就意味着,调用<code>__param</code>函数时, 其返回值不会用来覆盖参数值</p>
<p>这就是<code>参数装饰器</code>不反回的原因</p>
<h2 id="访问器装饰器"><a href="#访问器装饰器" class="headerlink" title="访问器装饰器"></a>访问器装饰器</h2><p>访问器不过是类声明中属性的读取访问器和写入访问器</p>
<p>访问器装饰器应用于访问器的<code>属性描述符</code>,可用于<code>观测</code>、<code>修改</code>、<code>替换</code>访问器的定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enumerable</span>(<span class="params">value: boolean</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">      target: any, propertyKey: string, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;decorator - sets the enumeration part of the accessor&#x27;</span>);</span><br><span class="line">        descriptor.enumerable = value;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    private _salary: number;</span><br><span class="line">    private _name: string;</span><br><span class="line"></span><br><span class="line">    @enumerable(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">get</span> <span class="title">salary</span>() &#123; <span class="keyword">return</span> <span class="string">`Rs. <span class="subst">$&#123;<span class="built_in">this</span>._salary&#125;</span>`</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title">salary</span>(<span class="params">salary: any</span>) &#123; <span class="built_in">this</span>._salary = +salary; &#125;</span><br><span class="line"></span><br><span class="line">    @enumerable(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">get</span> <span class="title">name</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`Sir/Madam, <span class="subst">$&#123;<span class="built_in">this</span>._name&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title">name</span>(<span class="params">name: string</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>._name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.salary = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`enumerable property = <span class="subst">$&#123;prop&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// salary 属性不在清单上，因为我们将其设为假</span></span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// decorator - sets the enumeration part of the accessor</span></span><br><span class="line"><span class="comment">// decorator - sets the enumeration part of the accessor</span></span><br><span class="line"><span class="comment">// enumerable property = _salary</span></span><br><span class="line"><span class="comment">// enumerable property = name</span></span><br></pre></td></tr></table></figure>

<p>上面的例子中,我们定义了两个访问器<code>name</code>和<code>salary</code>,并通过装饰器设置是否将其列入清单,据此决定对象的行为.<code>name</code>将入清单,而<code>salary</code>不会</p>
<p>下面是编译的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">enumerable</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, propertyKey, descriptor</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;decorator - sets the enumeration part of the accessor&#x27;</span>);</span><br><span class="line">        descriptor.enumerable = value;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Employee = <span class="comment">/** <span class="doctag">@class </span>*/</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(Employee.prototype, <span class="string">&quot;salary&quot;</span>, &#123;</span><br><span class="line">        get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">&quot;Rs. &quot;</span> + <span class="built_in">this</span>._salary; &#125;,</span><br><span class="line">        set: <span class="function"><span class="keyword">function</span> (<span class="params">salary</span>) </span>&#123; <span class="built_in">this</span>._salary = +salary; &#125;,</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(Employee.prototype, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">        get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Sir/Madam, &quot;</span> + <span class="built_in">this</span>._name;</span><br><span class="line">        &#125;,</span><br><span class="line">        set: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>._name = name;</span><br><span class="line">        &#125;,</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    __decorate([</span><br><span class="line">        enumerable(<span class="literal">false</span>)</span><br><span class="line">    ], Employee.prototype, <span class="string">&quot;salary&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    __decorate([</span><br><span class="line">        enumerable(<span class="literal">true</span>)</span><br><span class="line">    ], Employee.prototype, <span class="string">&quot;name&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">return</span> Employee;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line">emp.salary = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;enumerable property = &quot;</span> + prop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h2><p>类装饰器应用于类的构造器,可用于观测、修改、替换类的定义</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">target: <span class="built_in">Function</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 保存一份原构造器的引用</span></span><br><span class="line">    <span class="keyword">const</span> original = target;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成类的实例的辅助函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">construct</span>(<span class="params">constructor, args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> c: <span class="built_in">any</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title">constructor</span>.<span class="title">apply</span>(<span class="params"><span class="built_in">this</span>, args</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        c.prototype = <span class="title">constructor</span>.<span class="title">prototype</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> c();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新构造器行为</span></span><br><span class="line">    <span class="keyword">const</span> f: <span class="built_in">any</span> = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`New: <span class="subst">$&#123;original[<span class="string">&#x27;name&#x27;</span>]&#125;</span> is created`</span>);</span><br><span class="line">        <span class="keyword">return</span> construct(original, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 复制 prototype 属性，保持 intanceof 操作符可用</span></span><br><span class="line">    f.prototype = original.prototype;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回新构造器（将覆盖原构造器）</span></span><br><span class="line">    <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@logClass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;emp instanceof Employee&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(emp <span class="keyword">instanceof</span> Employee); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>上面的装饰器声明了一个名为original的变量,将其值设为装饰的类构造器.</p>
<p>接着声明了一个名为construct的辅助函数,该函数用于创建类的实例.</p>
<p>接下来创建了一个名为f的变量,该变量用于用作新的构造器,该函数调用原构造器,同时在控制台打印了实例话的类名</p>
<p>这正是我们给原构造器加入的额外的行为的地方<br>原来构造器的原型复制到了f,以确保创建一个Employee新实例的时候,instanceof操作符的效果符合预期</p>
<p>新构造器一旦就绪,我们便返回它, 以完成类构造器的实现</p>
<p>新构造器就绪后,每次创建实例时会在控制台打印类名</p>
<p>编译后的代码如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Employee = <span class="comment">/** <span class="doctag">@class </span>*/</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    Employee = __decorate([</span><br><span class="line">        logClass</span><br><span class="line">    ], Employee);</span><br><span class="line">    <span class="keyword">return</span> Employee;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> emp = <span class="keyword">new</span> Employee();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;emp instanceof Employee&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(emp <span class="keyword">instanceof</span> Employee);</span><br></pre></td></tr></table></figure>

<p>在编译后的代码中,我们注意到两处不同:</p>
<ol>
<li>传给__decorate的参数有两个, 装饰器数组和构造器函数</li>
<li>TypeScript编译器使用__decorate的返回值以覆盖原构造器</li>
</ol>
<p>这正是类装饰器必须返回一个构造函数的原因所在</p>
<h2 id="装饰器工厂"><a href="#装饰器工厂" class="headerlink" title="装饰器工厂"></a>装饰器工厂</h2><p>由于每种装饰器都有它自身的调用签名,我们可以使用装饰器工厂来泛化装饰器调用</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; logClass &#125; <span class="keyword">from</span> <span class="string">&#x27;./class-decorator&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; logMethod &#125; <span class="keyword">from</span> <span class="string">&#x27;./method-decorator&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; logProperty &#125; <span class="keyword">from</span> <span class="string">&#x27;./property-decorator&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; logParameter &#125; <span class="keyword">from</span> <span class="string">&#x27;./parameter-decorator&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 装饰器工厂，根据传入的参数调用相应的装饰器</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (args.length) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">// 可能是方法装饰器或参数装饰器</span></span><br><span class="line">            <span class="comment">// 如果第三个参数是数字，那么它是索引，所以这是参数装饰器</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">typeof</span> args[<span class="number">2</span>] === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> logParameter.apply(<span class="built_in">this</span>, args);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> logMethod.apply(<span class="built_in">this</span>, args);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// 属性装饰器 </span></span><br><span class="line">            <span class="keyword">return</span> logProperty.apply(<span class="built_in">this</span>, args);</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// 类装饰器</span></span><br><span class="line">            <span class="keyword">return</span> logClass.apply(<span class="built_in">this</span>, args);</span><br><span class="line">        <span class="keyword">default</span>: <span class="comment">// 参数数目不合法</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Not a valid decorator&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="meta">@log</span></span><br><span class="line">    <span class="keyword">private</span> name: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@log</span></span><br><span class="line">    greet(<span class="meta">@log</span> message: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> says: <span class="subst">$&#123;message&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="元信息反射API"><a href="#元信息反射API" class="headerlink" title="元信息反射API"></a>元信息反射API</h2><p>元信息反射API(例如 Reflect)能够用来以标准的方式组织元信息.</p>
<p>[反射]的意思是代码可以侦测同一系统中的其他代码(或其自身).</p>
<p>反射在组合/依赖注入、运行时类型断言、测试等使用场景下很有用.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;reflect-metadata&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数装饰器使用反射 api 存储被装饰参数的索引</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logParameter</span>(<span class="params">target: <span class="built_in">Object</span>, propertyName: <span class="built_in">string</span>, index: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取目标对象的元信息</span></span><br><span class="line">    <span class="keyword">const</span> indices = <span class="built_in">Reflect</span>.getMetadata(<span class="string">`log_<span class="subst">$&#123;propertyName&#125;</span>_parameters`</span>, target, propertyName) || [];</span><br><span class="line">    indices.push(index);</span><br><span class="line">    <span class="comment">// 定义目标对象的元信息</span></span><br><span class="line">    <span class="built_in">Reflect</span>.defineMetadata(<span class="string">`log_<span class="subst">$&#123;propertyName&#125;</span>_parameters`</span>, indices, target, propertyName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 属性装饰器使用反射 api 获取属性的运行时类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logProperty</span>(<span class="params">target: <span class="built_in">Object</span>, propertyName: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取对象属性的设计类型</span></span><br><span class="line">    <span class="keyword">var</span> t = <span class="built_in">Reflect</span>.getMetadata(<span class="string">&quot;design:type&quot;</span>, target, propertyName);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;propertyName&#125;</span> type: <span class="subst">$&#123;t.name&#125;</span>`</span>); <span class="comment">// name type: String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="meta">@logProperty</span></span><br><span class="line">    <span class="keyword">private</span> name: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    greet(<span class="meta">@logParameter</span> message: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> says: <span class="subst">$&#123;message&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码用到了<code>reflect-metadata</code>这个库.其中我们使用了反射元信息的设计键(例如<code>design:type</code>).目前只有三个:</p>
<ol>
<li>类型元信息: <code>design:type</code>,</li>
<li>参数类型元信息: <code>design:paramtypes</code></li>
<li>返回类型元信息: <code>design:returntype</code>,</li>
</ol>
<p>有了反射.我们就能够在运行时得到一下信息: </p>
<ol>
<li>实体名</li>
<li>实体类型</li>
<li>实体实现的接口</li>
<li>实体构造器参数的名称和类型</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>装饰器 不过是在设计时帮助内省代码,注解及修改类和属性的函数</li>
<li>Yehuda Katz 提议在ECMAScript2016标准中加入装饰器特征<a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-decorators">tc39/proposal-decorators</a></li>
<li>我们可以通过装饰器工厂将用户提供的参数传给装饰器</li>
<li>有4种装饰器: 类装饰器、方法装饰器、属性/访问器装饰器、参数装饰器</li>
<li>元信息反射API有助于以标准化的方式在对象中加入元信息,以及在运行时获取设计类型信息</li>
</ol>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>本文源于</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903876605280269">https://juejin.im/post/6844903876605280269</a></p>
<p>代码<br><a target="_blank" rel="noopener" href="https://github.com/mohanramphp/typescript-decorators">https://github.com/mohanramphp/typescript-decorators</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/TS/decorator/" data-id="ckm3ks1ww006enzx44aydf59n" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/Node/V8源码解析/V8执行流程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/V8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:32.091Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="编程语言的运行"><a href="#编程语言的运行" class="headerlink" title="编程语言的运行"></a>编程语言的运行</h1><p>众所周知,我们通过编程语言完成的程序是通过处理器运行的,但是处理器不能直接理解我们通过高级语言(如C++、Go、Javascript等)编写的代码, 只能理解机器码,所以在执行程序前,需要经过一系列的步骤,将我们编写的代码翻译成机器语言,这个过程一般是由编译器(compiler) 或者解释器(Interpreter)来完成</p>
<h2 id="编译器工作流程"><a href="#编译器工作流程" class="headerlink" title="编译器工作流程"></a>编译器工作流程</h2><p>源代码 - 词法分析- 语法分析 -  AST - 语义分析 - 中间代码 - 代码优化 - 机器码 - 执行</p>
<h2 id="解释器"><a href="#解释器" class="headerlink" title="解释器"></a>解释器</h2><p>源代码 - 词法分析 - 语法分析 - AST - 语义分析 - 字节码 - 执行</p>
<p>那么既然编译器和解释器都可以完成代码的翻译工作, 为何还同时存在呢</p>
<p>这是因为编程语言有两个类别: 静态类型 和动态类型.</p>
<p>静态类型: 比如 C++、Go 等,都需要提前编译(AOT) 成机器码 然后执行, 这个过程主要使用编译器来运行;<br>动态类型: 比如 Javascript、 Python 等, 只在运行时进行编译执行(JIT), 这个过程主要使用解释器完成.</p>
<p>V8并没有采用某种单一的技术,而是混合编译执行和解释执行这两种手段,我们把这种混合使用编译器和解释器的技术称为JIT(JustIn Time)技术</p>
<p>这是一种权衡策略,因为这两种办法都各自有各自的优缺点,解释执行的启动速度快,但是执行时的速度慢,而编译执行的启动速度慢,但是执行的速度快</p>
<h1 id="v8执行js代码流程"><a href="#v8执行js代码流程" class="headerlink" title="v8执行js代码流程"></a>v8执行js代码流程</h1><p><img src="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/V8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/2020-12-20-19-09-26.png"></p>
<p>V8启动执行javascript之前,它还需要准备执行JavaScript时所需要的一些基础环境,这些基础环境包括了 队空间、栈空间、全局执行上下文、全局作用域、消息循环系统、内置函数等, 这些内容都是执行javaScirpt 过程中 需要使用到的,比如:</p>
<ol>
<li>javaScript全局执行上下文就包含了执行过程中的全局信息, 比如一些内置函数,全局变量等信息、</li>
<li>全局作用域包含了一些全局变量,在执行过程中的数据都需要存放在内存中</li>
<li>而v8采用了经典的堆和栈内存管理模式,所以V8还需要初始化内存中的堆和栈结构</li>
<li>另外,想要我们的V8系统活起来,还需要初始化消息循环系统,消息循环系统包含了消息驱动器和消息队列,它如同V8的心脏,不断接受消息并决策如何处理消息</li>
</ol>
<p>基础环境准备好之后,接下来就可以向V8提交要执行的JavaScript代码了</p>
<ol>
<li>首先V8会接收到要执行的Javascirpt源代码,不过这对V8来说只是一堆字符串,V8并不能直接理解这段字符串的含义, 他需要结构化这段字符串,生成了抽象语法树(AST),AST是便于V8理解的结构.在生成AST的同时,V8还会生成相关的作用域, 作用域中存放相关的变量</li>
<li>有了AST和作用域之后,接下来就可以生成字节码了,字节码是介于AST和机器代码中间代码. 但是与特定类型的机器代码无关, 解释器可以直接解释执行行字解码,或者通过编译器将其编译为二进制的机器码,并输出执行结果</li>
<li>解释器就登场了,他会按照顺序解释执行字节码,并输出执行结果</li>
<li>有一个监控解释器执行状态的模块, 在解释执行字节码过程中,如果发现了某一段代码会被重复执行,那么监控机器人就会将这段代码标记为热点代码,</li>
<li>当某段代码被标记化为热点代码后,V8就会将这段字节码丢给优化编译器, 优化编译器会在后台将字节码编译为二进制代码, 然后再对编译后的二进制代码执行优化操作,优化后的二进制机器代码的执行效率会得到大大提升,如果下面再执行到这段代码时, 那么V8会优先选择优化之后的二进制代码,这样代码的执行速度就会大幅度提升</li>
<li>不过,和静态语言不同的是, javascript是一种非常灵活的动态语言, 对象的结构和属性是可以在运行时任意修改的, 而经过优化编译器优化的代码只能针对某种固定的结构,一旦在执行过程中, 对象的结构被动态修改了,那么优化之后的代码势必会变成无效的代码,这时候优化编译器就需要执行去优化操作,经过去优化的代码, 下次执行时就会回退到解释器解释执行</li>
</ol>
<h1 id="总结-V8执行一段JS代码的大致流程"><a href="#总结-V8执行一段JS代码的大致流程" class="headerlink" title="总结 V8执行一段JS代码的大致流程"></a>总结 V8执行一段JS代码的大致流程</h1><ol>
<li>初始化基础环境</li>
<li>解释源码生成AST和作用域</li>
<li>依据AST和作用域生成字节码;</li>
<li>解释执行字节码</li>
<li>监听热点代码</li>
<li>优化热点代码为二进制的机器代码</li>
<li>去优化生成的二进制机器代码</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/V8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/" data-id="ckm3ks1g3005anzx4eh2d62hr" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/Node/V8源码解析/Isolate" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/Isolate/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:32.078Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="V8"><a href="#V8" class="headerlink" title="V8"></a>V8</h1><p>V8引擎是一个javascript 引擎实现, 最初由一些语言方面的专家设计,后被谷歌收购, 随后谷歌对其进行了开源</p>
<p>v8引擎使用C++ 开发,在运行JavaScript之前, 相比其他JavaScript的引擎转换成字节码或解析执行,V8将其编译成原生机器码(IA-32, X86-64, ARM, or MIPS CPUs)</p>
<p>并且使用如内联缓存(inline-cahcing) 等方法来提高性能.</p>
<p>有了这些功能, JavaScript程序在V8引擎的运行速度媲美二进制程序</p>
<p>V8支持众多操作系统, 如 windows, linux, android 等,也支持其他硬件架构. 如IA32 X64, ARM等,具有很好的可移植性和跨平台性</p>
<h1 id="Isolate"><a href="#Isolate" class="headerlink" title="Isolate"></a>Isolate</h1><p>英文原意: 隔离.在操作系统中,我们有一个概念和之类似: 进程,进程是完全相互隔离的,一个进程里有多个线程, 同时各个进程之间并不相互共享资源.</p>
<p>Isolate 也是一样, Isolate1和Isolate2哥两拥有各自堆栈的虚拟机实例,且完全隔离</p>
<h2 id="V8的官方定义"><a href="#V8的官方定义" class="headerlink" title="V8的官方定义"></a>V8的官方定义</h2><p>Isolate 标示 V8 引擎的Isolate实例, v8 Isolate具有完全独立的状态,一个Isolate 中的对象不得在其他Isolate中使用, 初始化时v8隐式创建一个默认的Isolate.<br>embedder可以创建其他Isolate, 并在多个线程中并行使用他们. 在任何给定实践, Isolate 最多只能接受一个线程的输入.必须使用Locker/UnLocker API进行同步处理</p>
<h2 id="对比Context进行理解"><a href="#对比Context进行理解" class="headerlink" title="对比Context进行理解"></a>对比Context进行理解</h2><p>在V8里面, Context 主要是用于创建一个JavaScript的运行上下文环境, A Context 中的js变量完全独立于 B Context, 一般用Context 来做js的安全隔离. 这里需要区别Isolate,context 依附于Isolate</p>
<p>Isolate 于 context 的区别</p>
<ol>
<li>一个Isolate 是一份独立的 V8 runtime, 包括但不限于 一个heap管理器, 垃圾回收器等. 在一个时间端内, 有且只有一个线程能使用此isolate. 不过多个线程可以同时使用多个Isolate</li>
<li>单独的Isolate是不足以运行脚本的,我们在此需要一个全局对象, context 就是提供此全局变量的工具, 它在所处的Isolate 管理heap中建立一个对象, 并以此为全局变量构建出一个完整的执行环境供我们的脚本使用.</li>
<li>因此, 对于一个给定的Isolate, 不仅其可以有多个Context, 并且这些Context之间可以共享某写对象.</li>
</ol>
<p><img src="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/Isolate/2020-12-15-23-00-36.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/Node/V8%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/Isolate/" data-id="ckm3ks1g20058nzx4gne4afre" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/Node/NodeJS事件流" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/NodeJS%E4%BA%8B%E4%BB%B6%E6%B5%81/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:32.064Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="NodeJs-Event-Loop"><a href="#NodeJs-Event-Loop" class="headerlink" title="NodeJs Event Loop"></a>NodeJs Event Loop</h1><h2 id="NodeJS-Event-Loop-执行阶段"><a href="#NodeJS-Event-Loop-执行阶段" class="headerlink" title="NodeJS Event Loop 执行阶段"></a>NodeJS Event Loop 执行阶段</h2><p><img src="/2021/03/10/%E5%89%8D%E7%AB%AF/Node/NodeJS%E4%BA%8B%E4%BB%B6%E6%B5%81/2020-11-19-23-19-44.png"></p>
<ol>
<li>timers: 执行 <code>setTimeout</code> 和 <code>setImmediate</code> 的回调</li>
<li>pending callbacks: 执行延迟到下一个循环迭代的I/O回调</li>
<li>idle,prepare: 仅系统内部使用</li>
<li>poll: 检索新的I/O事件;执行与I/O相关的回调,事件上除了其他几个阶段处理的事件,其他几乎所有的异步都在这个阶段处理</li>
<li>check: setImmediate 在这里执行</li>
<li>close callbacks: 一些关闭的回调函数, 如: socket.on(‘close’,..)</li>
</ol>
<p>每个阶段都有一个自己的先进先出的队列,只有当这个队列的事件执行完或者达到该阶段的上限时, 才会进入下一个阶段,在每次事件循环之间,Node.js都会检查它是否在等待任何一个I/O或者定时器,如果没有的话,程序就关闭推出了,我们直观感受就是,如果一个node程序只有同步代码,你在控制台运行完后,他就自己推出了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/Node/NodeJS%E4%BA%8B%E4%BB%B6%E6%B5%81/" data-id="ckm3ks1g30059nzx45337586u" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/JS/new Class vs new Function" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/JS/new%20Class%20vs%20new%20Function/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:31.862Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="new-Class-vs-new-Function"><a href="#new-Class-vs-new-Function" class="headerlink" title="new Class vs new Function"></a>new Class vs new Function</h1><h2 id="编译前"><a href="#编译前" class="headerlink" title="编译前"></a>编译前</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.dir(<span class="string">&quot;Funciton a&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.dir(<span class="string">&#x27;class A&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> a();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> A();</span><br></pre></td></tr></table></figure>

<h2 id="编译后"><a href="#编译后" class="headerlink" title="编译后"></a>编译后</h2><figure class="highlight js"><figcaption><span>es5</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_instanceof</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    right != <span class="literal">null</span> &amp;&amp;</span><br><span class="line">    <span class="keyword">typeof</span> <span class="built_in">Symbol</span> !== <span class="string">&quot;undefined&quot;</span> &amp;&amp;</span><br><span class="line">    right[<span class="built_in">Symbol</span>.hasInstance]</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> !!right[<span class="built_in">Symbol</span>.hasInstance](left);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> left <span class="keyword">instanceof</span> right;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_classCallCheck</span>(<span class="params">instance, Constructor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!_instanceof(instance, Constructor)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Cannot call a class as a function&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.dir(<span class="string">&quot;Funciton a&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  _classCallCheck(<span class="built_in">this</span>, A);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.dir(<span class="string">&quot;class A&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> a();</span><br><span class="line"><span class="keyword">new</span> A();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="classCallCheck"><a href="#classCallCheck" class="headerlink" title="_classCallCheck"></a>_classCallCheck</h2><ol>
<li>作用: 防止<code>Class A</code>被当成函数调用<code>A()</code>;</li>
</ol>
<h2 id="Symbol-hasInstance"><a href="#Symbol-hasInstance" class="headerlink" title="Symbol.hasInstance"></a>Symbol.hasInstance</h2><ol>
<li><p>作用: 用户可以用来自定义<code>instaceof</code>, 判断对象是不是构造器的实例。</p>
</li>
<li><p> 兼容性 IE不支持</p>
</li>
<li><p>实现<code>instanceof</code></p>
</li>
</ol>
<p>example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> [<span class="built_in">Symbol</span>.hasInstance](instance) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(instance);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.dir([] <span class="keyword">instanceof</span> MyArray); <span class="comment">// true;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/JS/new%20Class%20vs%20new%20Function/" data-id="ckm3ks19z0043nzx46fp1hy7q" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/JS/es特性/es9" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es9/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:31.788Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="es9"><a href="#es9" class="headerlink" title="es9"></a>es9</h1><p>异步迭代器</p>
<p>Asyncchronous Interator， 异步执行语句 for..await… of<br>异步生成器 Async generator</p>
<p>特殊对象<br>next() =&gt; {value, done} done 布尔类型</p>
<p>创建一个迭代器</p>
<p>const createIterator = (items) =&gt; {<br>  const keys = Object(items)<br>  const len = keys.length;<br>  let pointer = 0;<br>  return {<br>    next() {<br>      const done = pointer&gt;=len;<br>      const value= !done? items[keys[pointer++]: undefined;<br>    },<br>    return { value, done}<br>  }<br>}</p>
<p>const it1 = createIterator([1,2,3]);</p>
<p>Symbol.iterator for …of …</p>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><p>Generator 特殊函数 yield 表达式</p>
<p>function * fn() {<br>  console.log(“正常函数我会执行”)<br>  yield 1;<br>  yield 2;<br>  yield 3;<br>  console.log(执行完了)<br>}</p>
<p>console.log(iteratorFn.next());</p>
<p>// 异步迭代器<br>区别</p>
<p>同步: {value:””, done:false}</p>
<p>异步： next() =&gt; promsie()</p>
<p>Promise.finally();</p>
<h2 id="Rest-Spread"><a href="#Rest-Spread" class="headerlink" title="Rest / Spread"></a>Rest / Spread</h2><p>…</p>
<h2 id="对象浅拷贝"><a href="#对象浅拷贝" class="headerlink" title="对象浅拷贝"></a>对象浅拷贝</h2><p>正则表达式</p>
<p>const  dateStr= “2030-08-01”；</p>
<p>const reg = /[0-9]{4}-[0-9]{4}-[0-9]{2}/</p>
<p>const res = reg.exec(dataStr)</p>
<p>console.dir(res)</p>
<p>ES9 ?<name></name></p>
<p>const reg1 = /(?<year>[0-9]{4})-(?<month>[0-9]{4})-(?<dat>[0-9]{2})/</dat></month></year></p>
<p>const res1 = reg1.exec(dataStr)</p>
<p>console.dir(res1)</p>
<p>replace 08-01-2030</p>
<p>const newDate = dateStr.replace(reg1, <code>$&#123;month&#125;-$&#123;day&#125;-$&#123;year&#125;</code>)</p>
<p>// 反向断言</p>
<p>// 先行断言</p>
<p>const 　 str = 　“$123”;</p>
<p>const reg = /\D(?=\d+)/</p>
<p>const result = reg.exec(str);</p>
<p>console.log(result)</p>
<h2 id="后行断言-反向断言-lt-patterm-gt"><a href="#后行断言-反向断言-lt-patterm-gt" class="headerlink" title="后行断言 反向断言 (?&lt;=patterm&gt;)"></a>后行断言 反向断言 (?&lt;=patterm&gt;)</h2><p>const reg2 = /(?&lt;=\D&gt;\d+)/;<br>console.log(reg2.exec(str))</p>
<h2 id="dotAll方式"><a href="#dotAll方式" class="headerlink" title="dotAll方式"></a>dotAll方式</h2><p>. 回车符以外的单字符</p>
<p>const str = ‘yi\ndeng’;</p>
<p>console.log(/yi.deng/,test(str));// false</p>
<p>允许行终止符的出现<br>console.log(/yi.deng/s,test(str));// false</p>
<p>// 汉字匹配</p>
<p>const oldReg=/[\u4e00-\u9fa5]/; </p>
<p>const str = “”</p>
<p>const newReg=/\p{Script=Han}/u;</p>
<p>// 非转译序列的模板字符串<br>\u unicode转译 \x 十六进制转译</p>
<p>String.row(‘\u{54}’)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es9/" data-id="ckm3ks17n003mnzx49hr69l0e" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/JS/es特性/es8" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es8/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:31.781Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ES8"><a href="#ES8" class="headerlink" title="ES8"></a>ES8</h2><p>// Async/Await</p>
<p>// next =&gt; Promise</p>
<p>// 异步代码</p>
<p>// 1. 嵌套回掉<br>// 2. Promise<br>// 3. Generators</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> num +a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">2</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="promsie-错误处理"><a href="#promsie-错误处理" class="headerlink" title="promsie 错误处理"></a>promsie 错误处理</h2><h2 id="await-的异步执行"><a href="#await-的异步执行" class="headerlink" title="await 的异步执行"></a>await 的异步执行</h2><h2 id="Object-values-vs-Object-keys-继承来的没有办法"><a href="#Object-values-vs-Object-keys-继承来的没有办法" class="headerlink" title="Object.values() vs Object.keys() // 继承来的没有办法"></a>Object.values() vs Object.keys() // 继承来的没有办法</h2><h2 id="Object-entries-vs-for…in"><a href="#Object-entries-vs-for…in" class="headerlink" title="Object.entries() vs for…in"></a>Object.entries() vs for…in</h2><h1 id="String-Padding"><a href="#String-Padding" class="headerlink" title="String Padding"></a>String Padding</h1><ol>
<li>String.prototype.padStart(targetLength, [padString])</li>
<li>String.prototype.padEnd()</li>
</ol>
<h1 id="结尾允许逗号"><a href="#结尾允许逗号" class="headerlink" title="结尾允许逗号"></a>结尾允许逗号</h1><h1 id="Object-getOwnPropertyDescriptors-对象描述符"><a href="#Object-getOwnPropertyDescriptors-对象描述符" class="headerlink" title="Object.getOwnPropertyDescriptors(); // 对象描述符"></a>Object.getOwnPropertyDescriptors(); // 对象描述符</h1><h1 id="SharedArrayBuffer-与-Atomics-多线程功能"><a href="#SharedArrayBuffer-与-Atomics-多线程功能" class="headerlink" title="SharedArrayBuffer 与 Atomics // 多线程功能"></a>SharedArrayBuffer 与 Atomics // 多线程功能</h1><p>共享内存，把多线程引入js</p>
<p>JS主线程， web-worker线程</p>
<p>// postMessage();</p>
<p>多线程 竞争 Atomics</p>
<p>Atomics.load(SharedArrayBuffer, position)<br>Atomics.store(SharedArrayBuffer, position, newValue) //写入值<br>exchange() 返回替换的值<br>Atomics.wait(arrBuffer, 11, 11，2000) 休眠<br>Atomics.notify(共享视图数组，位置， 进程数)<br>Atomics.add(intArrBuffer, index,value)<br>sub()<br>and,or,xor<br>compareExchange(intArrBuffer,12,13,33)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es8/" data-id="ckm3ks17m003inzx49ehb0zqa" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/JS/es特性/es7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es7/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:31.775Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ES7"><a href="#ES7" class="headerlink" title="ES7"></a>ES7</h1><h2 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h2><p>判断数组中存在某元素<br>arr = [1, 2,3]</p>
<p>arr.indexOf(4)&gt;=0<br>arr.includes(4);</p>
<h2 id="指数运算"><a href="#指数运算" class="headerlink" title="** 指数运算"></a>** 指数运算</h2><p>Math.pow(2,3)<br>2**3</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es7/" data-id="ckm3ks17l003gnzx4cd0ebrzn" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-前端/JS/es特性/es10" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es10/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T15:06:31.769Z" itemprop="datePublished">2021-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ES10-bigInt"><a href="#ES10-bigInt" class="headerlink" title="ES10 bigInt"></a>ES10 bigInt</h1><p>// Flat flatMap()</p>
<p>flat 拉平数组，去除空项<br>const arr = [1,2,3,[4,5]]<br>const arr1 = [1,2,3,[4,5,[6]]]<br>console.log(arr.flat())<br>console.log(arr1.flat(num))<br>console.log(arr1.flat(Infinity))</p>
<p> const arr1 = [1,2,3,4]</p>
<p> console.log(arr1.map(x=&gt;[x<em>2]))<br> console.log(arr1.flatMap(x=&gt;[x</em>2]))</p>
<p> //Object.formEntries() =&gt; 对象自身可枚举属性  for…in</p>
<p> const map = new Map([“name”,”-灯”], [“address”,”bejing”]);<br>console.log(Object.formEntries(map))<br>console.log(Object.entries);Ide</p>
<p>String.prototype.matchAll 返回包含所有匹配正则表达式及分组捕获迭代器</p>
<p>const  str = “yideng xuetang xuetang”;</p>
<p>const reg= /xue*/g</p>
<p>while(matches = reg.exec(str)!== null) {<br>  console.log(<code>$&#123;matches[0]&#125;-$&#123;reg.lastIndex&#125;</code>)<br>}</p>
<p>let matches2  = str.matchAll(reg)</p>
<p>const reg = /y(i)(deng(\d?))/g</p>
<p>// trimStart // trimEnd </p>
<p>// Symbol.prototype.description</p>
<p>const sym = Symbol(“描述”)<br>console.log(String(sym))<br>console.log(sym.description);</p>
<p>Catch 参数可以省略</p>
<p>// 之前</p>
<p>try { </p>
<p>} catch(e) {</p>
<p>}</p>
<p>try { </p>
<p>} catch{</p>
<p>}</p>
<h2 id="行分割符和段分割符号"><a href="#行分割符和段分割符号" class="headerlink" title="行分割符和段分割符号"></a>行分割符和段分割符号</h2><p>JSON.parse JSON是ECMAScript的一个子集</p>
<p>// 草案 解决一个问题</p>
<p>const json = ‘{“name”: “yideng”\nxuetang}’</p>
<p>console.log(json)</p>
<p>JSON.parse(json);</p>
<p>JSON.stringify()</p>
<p>字符U+D800 到 U+DFFF处理</p>
<p>U+2028 行分隔符 U+2029 段分割符</p>
<p>JSON.stringify(‘\UDEAD’);</p>
<p>Array.prototype.sort()</p>
<p>小于10 插入排序 快速排序 O&lt;n^2&gt;</p>
<p>新的v8 TimSort() n(nlogn)</p>
<p>const arr = [<br>  {name: ‘w’, age:18}<br>  {name: ‘d’, age:1}<br>  {name: ‘yideng ‘, age:8}<br>  {name: ‘x’, age:108}<br>  {name: ‘j’, age:198}<br>]</p>
<p>arr.sort((a,b)=&gt; a.age-b.age);</p>
<p>Function.string()</p>
<p>Object.prototype.toString();</p>
<p>function /<em>1213</em>/ foo /<em>123</em>/() {<br>}</p>
<p>console.log(foo.toString())</p>
<p>// BigInt  任意进度整数 第七种基本数据类型</p>
<p>2^53-1</p>
<p>let num = 1n;</p>
<p>// 标准化的globalThis 对象</p>
<p>const getGlobal = function () {<br>  if(typeof self != “undefined) return self;<br>  if(typeof window != “undefined) return window;<br>  if(typeof gloabal != “unefined”) reutrn global;</p>
<p>  throw new Error();<br>}</p>
<p>// 在任何属性中打印this<br>consolelog(globalThis)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/10/%E5%89%8D%E7%AB%AF/JS/es%E7%89%B9%E6%80%A7/es10/" data-id="ckm3ks17m003knzx4dd724hmb" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/">技术文档</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/">前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/HTTPS/">HTTPS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/JS/">JS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/Koa/">Koa</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/Promise/">Promise</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/Vue/">Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/async/">async</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/async/await/">await</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/ci/">ci</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/ci-cd/">ci/cd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/db/">db</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/e2e/">e2e</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/mac/">mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/node/">node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/test/">test</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/vue/">vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/vue3/">vue3</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/webpack/">webpack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/%E5%9B%BE%E7%89%87/">图片</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/%E6%B5%8B%E8%AF%95/">测试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%89%8D%E7%AB%AF/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%B7%A5%E5%85%B7/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%B7%A5%E5%85%B7/PPT/">PPT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%B7%A5%E5%85%B7/iterm2/">iterm2</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E5%B7%A5%E5%85%B7/markdown/">markdown</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ssh/">ssh</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/%E7%AE%97%E6%B3%95/">算法</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/" rel="tag">HTTPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Koa/" rel="tag">Koa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PPT/" rel="tag">PPT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angularjs/" rel="tag">angularjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/" rel="tag">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/await/" rel="tag">await</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci/" rel="tag">ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci-cd/" rel="tag">ci/cd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/db/" rel="tag">db</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/e2e/" rel="tag">e2e</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/error/" rel="tag">error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gogs/" rel="tag">gogs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iterm2/" rel="tag">iterm2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jest/" rel="tag">jest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue3/" rel="tag">vue3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">函数式编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E7%89%87/" rel="tag">图片</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91/" rel="tag">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag">计算机基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E8%A8%80/" rel="tag">语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/HTTP/" style="font-size: 11.43px;">HTTP</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/JS/" style="font-size: 15.71px;">JS</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10px;">Koa</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/PPT/" style="font-size: 10px;">PPT</a> <a href="/tags/Promise/" style="font-size: 11.43px;">Promise</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/angularjs/" style="font-size: 12.86px;">angularjs</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/await/" style="font-size: 10px;">await</a> <a href="/tags/ci/" style="font-size: 10px;">ci</a> <a href="/tags/ci-cd/" style="font-size: 10px;">ci/cd</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/db/" style="font-size: 10px;">db</a> <a href="/tags/docker/" style="font-size: 11.43px;">docker</a> <a href="/tags/e2e/" style="font-size: 10px;">e2e</a> <a href="/tags/error/" style="font-size: 10px;">error</a> <a href="/tags/gogs/" style="font-size: 10px;">gogs</a> <a href="/tags/iterm2/" style="font-size: 10px;">iterm2</a> <a href="/tags/javascript/" style="font-size: 14.29px;">javascript</a> <a href="/tags/jest/" style="font-size: 10px;">jest</a> <a href="/tags/js/" style="font-size: 18.57px;">js</a> <a href="/tags/mac/" style="font-size: 11.43px;">mac</a> <a href="/tags/markdown/" style="font-size: 11.43px;">markdown</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/test/" style="font-size: 10px;">test</a> <a href="/tags/vscode/" style="font-size: 12.86px;">vscode</a> <a href="/tags/vue/" style="font-size: 14.29px;">vue</a> <a href="/tags/vue3/" style="font-size: 10px;">vue3</a> <a href="/tags/webpack/" style="font-size: 17.14px;">webpack</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">函数式编程</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 20px;">前端</a> <a href="/tags/%E5%9B%BE%E7%89%87/" style="font-size: 10px;">图片</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">基础</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 10px;">开发</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 12.86px;">框架</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 11.43px;">测试</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 14.29px;">浏览器</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 12.86px;">算法</a> <a href="/tags/%E7%BB%84%E4%BB%B6/" style="font-size: 10px;">组件</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 11.43px;">网络</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 11.43px;">计算机基础</a> <a href="/tags/%E8%AF%AD%E8%A8%80/" style="font-size: 14.29px;">语言</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/11/ci/ssh/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/11/ci/nginx/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/11/ci/circleci/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/11/%E7%AE%97%E6%B3%95/LRU%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/03/11/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81%E6%81%A2%E5%A4%8D/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>